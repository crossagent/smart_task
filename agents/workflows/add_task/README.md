# 添加任务工作流：关于任务颗粒度的理念

本文档概述了在向系统中添加新任务时，确定适当细节级别（颗粒度）的指导原则。其目标是创建一个既实用又低阻力的任务管理系统。

## 核心原则

记录和管理一个任务所需的精力，应远小于完成该任务本身所需的精力。如果记录任务比完成工作本身更麻烦，那么这个系统就失败了。添加任务的过程应该旨在理清思路，而不是使其复杂化。

## 任务颗粒度的三个层次

我们将工作项概念化为三个主要层次。“添加任务”工作流应能智能地协助用户将其输入放入正确的层次。

### 1. 项目 (Project) 或 史诗 (Epic)

*   **定义：** 一个由多个任务组成的大型、长期目标。它代表一个重要的成果或可交付物。
*   **示例：** “上线新网站”、“制定第三季度营销活动”、“重构认证服务”。
*   **识别启发法：**
    *   它是一个目标，而非单一行动吗？
    *   需要多人或数周/数月才能完成吗？
    *   需要分解成更小的步骤才能执行吗？

### 2. 任务 (Task) 或 故事 (Story)

*   **定义：** 为项目做出贡献的一个具体的、独立的工作单元。它应该是可分配、可测试的，并有明确的“完成”标准。
*   **示例：** “设计主页UI模型”、“编写用户注册的API端点”、“起草新闻稿文案”。
*   **识别启发法：**
    *   **“两天”法则：** 一个人能否在几小时到两天的时间内完成？如果时间更长，它可能应该是一个项目。
    *   **可交付成果：** 它是否会产生一个具体的、有形的产出？
    *   **清晰度：** 请求是否足够清晰，以便他人无需大量进一步澄清即可执行？

### 3. 子任务 (Sub-task) 或 待办事项 (To-Do)

*   **定义：** 完成一个较大任务所需的具体、独立的步骤。这些通常被任务负责人用作个人清单。
*   **示例：** 对于“编写API端点”这个任务，子任务可能包括：“创建数据库迁移”、“实现验证逻辑”、“编写单元测试”、“更新文档”。
*   **识别启发法：**
    *   **“两小时”法则：** 这是否是可以在一个短暂的、单一的时间段内（例如，两小时内）完成的事情？
    *   **清单项：** 它感觉更像是一个清单上的项目，而不是一个需要自己规划的工作？
    *   **低开销：** 为此项目创建一个正式的“任务”的成本将超过其带来的好处。

## `add_task` 代理的角色

`add_task` 代理的角色不仅仅是被动地接收输入。它应该主动与用户互动，以确定正确的颗粒度。

1.  **分析用户输入：** 解析用户的自然语言请求。
2.  **上下文查询：** 搜索现有项目和任务，看新项目是否适合现有结构。
3.  **建议颗粒度：** 根据输入和上下文，建议该项目应该是新项目、现有项目中的任务，还是子任务。
    *   *示例提示：* “听起来‘构建登录功能’是一项较大的工作。您想为此创建一个新项目，并将‘设计UI’作为第一个任务添加吗？”
    *   *示例提示：* “‘修复联系页面上的拼写错误’是‘网站维护’项目的一部分吗？”

通过嵌入这种逻辑，工作流有助于维护一个清晰、有组织且实用的任务结构，防止系统变成一个混乱的、难以管理的项目列表。
